Ext.Loader.setPath("Ext.ux","static/ext-4.2.0/examples/ux");Ext.require(["Ext.ux.RowExpander"]);Ext.require(["Ext.container.Viewport","Ext.layout.container.Border","Ext.tab.Panel","Ext.tree.*","Ext.data.*","Ext.menu.*","Ext.window.MessageBox","Ext.grid.*",]);function displayInnerGrid(a){$.getJSON("/api/widget/tradetable/?identifier="+a,function(c){fields=[];for(i=0;i<c.columns.length;i++){fields[i]=c.columns[i].dataIndex}var d=Ext.create("Ext.data.Store",{fields:fields,data:c.rows,proxy:{type:"memory",reader:{type:"json",root:"objects"}}});var b=Ext.create("Ext.grid.Panel",{store:d,selModel:{selType:"cellmodel"},columns:c.columns,header:false,width:500,height:150,iconCls:"icon-grid",renderTo:a,});b.getEl().swallowEvent(["mousedown","mouseup","click","contextmenu","mouseover","mouseout","dblclick","mousemove"])})}function lineBarChart(c,b){var d=$("#data").data("linebar-div");var a=$("#"+d).highcharts();a.destroy();$.getJSON(b.url+b.qs,function(g){var e={chart:{renderTo:d,marginTop:5,},navigator:{enabled:true},scrollbar:{enabled:false,},rangeSelector:{enabled:true,},title:{text:false,},xAxis:[{gridLineWidth:1,type:"datetime",labels:{rotation:-45,align:"right",style:{fontSize:"13px",fontFamily:"Verdana, sans-serif"}},},{}],yAxis:[{height:180,lineWidth:3,offset:0,gridLineWidth:1,title:{text:"Price",margin:5,}},{top:225,lineWidth:3,gridLineWidth:1,offset:0,height:75,title:{text:"Volume",}},],legend:{enabled:true,verticalAlign:"top",y:-10,},series:[{yAxis:0,name:"Price by time",stack:0,data:g.line,tooltip:{valueDecimals:2},},{name:"Volume by time",yAxis:1,stack:0,data:g.bar,tooltip:{valueDecimals:2},lineWidth:3,marker:{enabled:false},pointWidth:5,type:"column",},]};var f=new Highcharts.Chart(e)})}function destroyInnerGrid(a){var b=document.getElementById(a.get("id"));var c=b.firstChild;while(c){c.parentNode.removeChild(c);c=c.nextSibling}}function monthlyBar(b,d){var f=$("#data").data("div-holdperfbargraph");var c=$("#"+f).highcharts();var a="/api/widget/holdperfbargraph/?date="+b+"&fund="+d+"&order_by=weight";try{c.destroy();$.getJSON(a,function(h){var g=new Highcharts.Chart({chart:{renderTo:f,type:"column",},labels:{rotation:-45,align:"right",style:{fontSize:"10px",fontFamily:"Verdana, sans-serif"}},xAxis:{type:"category",categories:h.columns,},series:h.objects,})})}catch(e){}}Ext.onReady(function(){$('<div id="data"></div>').appendTo("body");function f(L){var M=L.page;var J=$("#data").data("page");for(i=0;i<J.length;i++){if(J[i].id==M){el="page"+M;if(J[i].children!==undefined){var K=n();v(K,el);d(J[i]);L.page=J[i].children[0].id}else{var K=l();v(K,el);$("#data").data("grid"+M,"");$('<div id="page'+M+'"></div>').appendTo("#menu")}H(L)}}}function d(K){var J=Ext.getCmp("panel-tab");J.removeAll();for(x=0;x<K.children.length;x++){id=K.children[x].id;$('<div id="page'+id+'" class="gridster"></div>').appendTo("body");$("#data").data("grid"+id,"");J.add({title:K.children[x].title,id:id,contentEl:"page"+id,autoScroll:true,listeners:{activate:function(L){H(L.id)}},})}J.setActiveTab(0)}function v(K,L){var N=$("#data").data("active-panel");var J=Ext.getCmp("viewport");try{J.remove(N)}catch(M){console.log("Failed to remove panel");console.log(M)}$('<div id="menu" class="gridster"></div>').appendTo("body");try{J.add(K)}catch(M){console.log("Failed to add panel");console.log(M)}J.doLayout();$("#data").data("active-panel",K.id)}function H(K){var J=K.page;$("#data").data("page_id",J);if($("#data").data("grid"+J)!==undefined&&$("#data").data("grid"+J)!==""){return}K.grid=$("#page"+J).gridster({widget_margins:[10,10],widget_base_dimensions:[140,140],max_size_x:10,max_size_y:10,draggable:{stop:function(L,M){g(JSON.stringify(grid.serialize()))}},serialize_params:function(M,L){return{id:L.el[0].id,col:L.col,row:L.row,size_y:L.size_y,size_x:L.size_x,pagewindow:M.context.attributes.pagewindow.value,}}}).data("gridster");K.grid.disable();$("#data").data("grid"+J,K.grid);$.ajax({type:"GET",url:"/api/pagewindow/?page="+J,success:function(L){$("#data").data("grid_data"+J,L);for(i=0;i<L.length;i++){p(L[i],i,K)}}})}function p(O,K,P,M){var N=P.page;var J=$("#data").data("grid"+N);var L='<div id="'+N+"_"+O.window.id+'" pagewindow="'+O.id+'" class="layout_block"></div>';J.add_widget(L,O.size_x,O.size_y,O.col,O.row);$.ajax({type:"GET",url:"/api/widgets/?window="+O.window.id,ajaxI:K,success:function(S){I=this.ajaxI;var U="page_"+N+"_"+O.window.id;$('<div id="'+U+'"></div>').appendTo("body");var T=O.window.layout+"box";var Q=[];for(x=0;x<S.length;x++){var R="page_"+N+"_win_"+O.window.id+"_widget_"+S[x].id;$('<div id="'+R+'"></div>').appendTo("#"+U);Q[I]={renderTo:R,height:(140*O.size_y)+(10*O.size_y)+(10*(O.size_y-1))-20,width:(140*O.size_x)+(10*O.size_x)+(10*(O.size_x-1))-20,border:false,};E(P,S[x],R)}Ext.create("Ext.container.Container",{renderTo:U,layout:T,items:Q});y(O.window.id,N,O.window.name,O.size_x,O.size_y,O.id,U)}})}function y(M,O,P,K,J,L,N){Ext.create("Ext.window.Window",{title:P,height:(140*J)+(10*J)+(10*(J-1))-10,width:(140*K)+(10*K)+(10*(K-1))-10,layout:"auto",floatable:false,draggable:false,closable:false,contentEl:N,x:0,y:0,renderTo:O+"_"+M,tools:[{type:"close",handler:function(T,S,R,Q){Ext.Msg.show({title:"Remove Widget?",msg:"You want to remove the widget from this page?",buttons:Ext.Msg.OKCANCEL,icon:Ext.Msg.CONFIRM,fn:function(V){if(V=="ok"){var U=$("#data").data("grid"+O);U.remove_widget($("#"+O+"_"+M));o(L)}}})}}],}).show()}function o(J){$.ajax({type:"DELETE",url:"/api/pagewindow/"+J+"/",success:function(){},error:function(K){},})}function E(N,M,P,L){if(typeof L!="undefined"){$.each(L,function(Q,R){M.qs=M.qs.replace(Q.toUpperCase(),R)})}$.each(M.params,function(Q,R){M.qs=M.qs.replace(Q.toUpperCase(),R)});if(typeof N.year=="undefined"||typeof N.month=="undefined"){N.year=new Date().getFullYear();N.month=new Date().getMonth()+1}M.div=P;M.url="/api/widget/"+M.key+"/";$.each(N,function(Q,R){M.qs=M.qs.replace(Q.toUpperCase(),R)});if(M.type=="month_table"){return w(N,M,P)}else{if(M.type=="data_table"){return s(N,M,P)}else{if(M.type=="data_table_sub"){return a(N,M,P)}else{if(M.type=="line_chart"){return F(N,M,P)}else{if(M.type=="bar_chart"){var O=new Date();O.setDate(1);O.setHours(-1);var J=N.year+"-"+N.month+"-"+O.getDate();M.qs=M.qs.replace("DATE",J);return q(N,M,P)}else{if(M.type=="line_bar_chart"){return r(N,M,P)}}}}}}try{$.getJSON(url,function(Q){switch(M.type){case"graph":c(M,Q,P);break;case"pie_chart":j(M,Q,P);break}})}catch(K){}}function c(L,K,M){try{$.jqplot(M,K,{axes:{yaxis:{min:-10,max:240}},series:[{color:"#5FAB78"}]})}catch(J){}}function F(K,J,L){$.getJSON(J.url+J.qs,function(N){var M=new Highcharts.StockChart({chart:{type:"line",marginRight:25,size:"100%",renderTo:L,width:(140*J.size_x)+(10*J.size_x)+(10*(J.size_x-1))-10,height:(140*J.size_y)+(10*J.size_y)+(10*(J.size_y-1)),},navigator:{enabled:true,},scrollbar:{enabled:false},rangeSelector:{enabled:false,},title:{enabled:false,},xAxis:{gridLineWidth:1,},yAxis:{title:{text:"Performance"},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{},legend:{enabled:true,},series:N,})})}function q(K,J,L){$.getJSON(J.url+J.qs,function(N){title=false;if(typeof J.params.title!="undefined"&&J.params.title=="true"){title=J.name}legend=true;if(typeof J.params.legend!="undefined"&&J.params.legend=="false"){legend=false}scrollbar=false;if(typeof J.params.scrollbar!="undefined"&&J.params.scrollbar=="true"){scrollbar=true}var M=new Highcharts.Chart({chart:{renderTo:L,type:"column",width:(140*J.size_x)+(10*J.size_x)+(10*(J.size_x-1))-10,height:(140*J.size_y)+(10*J.size_y)+(10*(J.size_y-1))-30,},title:{text:false},subtitle:{text:false},yAxis:{title:{text:false,}},legend:{enabled:legend,},series:[{data:N,color:"white"}],exporting:{enabled:true},labels:{rotation:-45,align:"right",style:{fontSize:"10px",fontFamily:"Verdana, sans-serif"}},xAxis:{type:"category",categories:N.columns,},series:N.objects,});$("#data").data("div-"+J.key,L)})}function r(K,J,L){$("#data").data("linebar-div",L);$.getJSON(J.url+J.qs,function(O){var M={chart:{renderTo:L,marginTop:5,},navigator:{enabled:true},scrollbar:{enabled:false,},rangeSelector:{enabled:true,},title:{text:false,},xAxis:[{gridLineWidth:1,type:"datetime",labels:{rotation:-45,align:"right",style:{fontSize:"13px",fontFamily:"Verdana, sans-serif"}},},{}],yAxis:[{height:180,lineWidth:3,offset:0,gridLineWidth:1,title:{text:"Price",margin:5,}},{top:225,lineWidth:3,gridLineWidth:1,offset:0,height:75,title:{text:"Volume",}},],legend:{enabled:true,verticalAlign:"top",y:-10,},series:[{yAxis:0,name:"Price by time",stack:0,data:O.line,tooltip:{valueDecimals:2},},{name:"Volume by time",yAxis:1,stack:0,data:O.bar,tooltip:{valueDecimals:2},lineWidth:3,marker:{enabled:false},pointWidth:5,type:"column",},]};var N=new Highcharts.Chart(M)})}function w(K,J,L){$.getJSON(J.url+J.qs,function(P){var R=new Date(K.year,K.month-1,1);var T=R.getDay();var O=new Date(K.year,K.month,0);var S=O.getDate();var N='<table class="month_table"><tr>';if(T<6){for(i=1;i<T;i++){N+="<td></td>"}}days={};for(i=0;i<P.length;i++){var M=P[i].date.substr(8,2);M=parseInt(M,10);days[M]=P[i].value}for(i=1;i<=S;i++){if(typeof days[i]!="undefined"){var Q=days[i]}else{var Q=0}date=K.year.toString()+"-"+K.month.toString()+"-"+i;var R=new Date(date);if(R.getDay()==6||R.getDay()==0){if(R.getDay()==0&&i==1){continue}else{if(R.getDay()==6&&i==1){i++;continue}else{N+="</tr><tr>";i++;continue}}}N+="<td>"+i+'<a href="#" onclick="monthlyBar(\''+date+"', "+K.fund+');">'+Q+"</a></td>"}N+="</tr></table>";Ext.create("Ext.container.Container",{id:"month-table",width:400,renderTo:L,items:[{id:"month-table-content",xtype:"container",html:N,}]})})}function s(K,J,L){if(typeof K.fund!="undefined"){$("#data").data("fund",K.fund)}$.getJSON(J.url+J.qs,function(N){var M=$("#data").data("fund");fields=[];for(i=0;i<N.columns.length;i++){fields[i]=N.columns[i].dataIndex}Ext.create("Ext.data.Store",{storeId:J.key,fields:fields,data:N.rows,proxy:{type:"memory",reader:{type:"json",root:"rows"}},sortInfo:{direction:"DESC",field:"year"},});Ext.create("Ext.grid.Panel",{id:L,store:Ext.data.StoreManager.lookup(J.key),columns:N.columns,width:(140*J.size_x)+(10*J.size_x)+(10*(J.size_x-1)),height:(140*J.size_y)+(10*J.size_y)+(10*(J.size_y-1)),header:false,border:false,enableLocking:true,autoScroll:true,renderTo:L,forceFit:true,listeners:{cellclick:function(S,R,Q,P){year=P.data.year;K.page=$("#data").data("page_id");K.grid=$("#data").data("grid"+K.page);extra_params={year:year,};G("w3",K,extra_params);G("w4",K,extra_params);G("w5",K,extra_params);if(Q==0){}else{if(Q<13){month=Q;var O=Ext.getCmp("month-table");O.remove("month-table-content");K={};K.month=month;K.year=year;K.fund=M;J.key="fundperfmonthtable";J.params.date__year="YEAR";J.params.date__month="MONTH";J.params.fund="FUND";J.type="month_table";E(K,J,O.renderTo)}}}}})})}function G(K,L,J){$.getJSON("/api/widgets/?window__key="+K,function(M){for(x=0;x<M.length;x++){var P="page_"+L.page+"_win_"+M[x].window.id;var N=P+"_widget_"+M[x].id;if(M[x].type=="data_table"){var O=Ext.getCmp(N)}else{var O=$("#"+N).highcharts()}O.destroy();$('<div id="'+N+'"></div>').appendTo("#"+P);E(L,M[x],N,J)}})}function a(K,J,L){$.getJSON(J.url+J.qs,function(M){fields=["id"];for(i=0;i<M.columns.length;i++){fields[i]=M.columns[i].dataIndex}var N=Ext.create("Ext.data.Store",{fields:fields,data:M.rows,proxy:{type:"memory",reader:{type:"json",root:"objects"}}});var O=Ext.create("Ext.grid.Panel",{store:N,columns:M.columns,selModel:{selType:"cellmodel"},width:(140*J.size_x)+(10*J.size_x)+(10*(J.size_x-1)),height:(140*J.size_y)+(10*J.size_y)+(10*(J.size_y-1)),plugins:[{ptype:"rowexpander",rowBodyTpl:['<div id="{id}">',"</div>"]}],header:false,border:0,iconCls:"icon-grid",renderTo:L});O.view.on("expandBody",function(S,Q,P,R){var T=Q.get("id");displayInnerGrid(Q.get("id"));J.url="/api/widget/holdlinegraph/";J.qs="?identifier="+Q.get("id")+"&fund="+K.fund;J.div=L;lineBarChart("",J);if(typeof $("#data").data("last-open-subgrid")!="undefined"){}1});O.view.on("collapsebody",function(S,Q,P,R){destroyInnerGrid(Q)})})}function j(L,K,M){var J=new Highcharts.Chart({chart:{renderTo:M,plotBackgroundColor:null,plotBorderWidth:null,plotShadow:false},title:{text:"Browser market shares at a specific website, 2010"},tooltip:{pointFormat:"{series.name}: <b>{point.percentage}%</b>",percentageDecimals:1},plotOptions:{pie:{allowPointSelect:true,cursor:"pointer",size:200,dataLabels:{enabled:true,color:"#000000",connectorColor:"#000000",formatter:function(){return"<b>"+this.point.name+"</b>: "+this.percentage+" %"}}}},series:[{type:"pie",name:"Browser share",data:[["Firefox",45],["IE",26.8],{name:"Chrome",y:12.8,sliced:true,selected:true},["Safari",8.5],["Opera",6.2],["Others",0.7]]}]})}function C(J){setInterval(function(){try{var K=Ext.StoreMgr.lookup(J);K.reload()}catch(L){}},2000)}function m(){var K=new Array();window.oldSetInterval=window.setInterval;window.setInterval=function(M,L){K.push(oldSetInterval(M,L))};for(var J in K){window.clearInterval(J)}}Ext.QuickTips.init();function h(){var J=$("#data").data("page_id");$.ajax({type:"GET",url:"/api/widget/unused/?page="+J,success:function(K){var L=Ext.create("Ext.data.Store",{storeId:"widgets",fields:["name","widget_type"],groupField:"widget_type",autoLoad:true,proxy:{data:K,type:"memory",reader:{type:"json",}},});var N=Ext.create("Ext.grid.feature.Grouping",{groupHeaderTpl:'{name} ({rows.length} Item{[values.rows.length > 1 ? "s" : ""]})'});var M=Ext.create("Ext.grid.Panel",{iconCls:"icon-grid",frame:true,store:L,header:false,region:"west",width:"60%",bodyBorder:true,hideHeaders:true,features:[N],columns:[{text:"Widget",flex:1,dataIndex:"name",},{text:"Type",flex:1,dataIndex:"widget_type",hidden:true,}],listeners:{itemclick:function(R,P){$.ajax({type:"GET",url:"/api/widget/info/"+P.data.id,success:function(T){$("#data").data("widget",T);html='<div class="widget_desc"><img src="'+STATIC_URL+"widget-images/"+T.key+'.png"></img><h1>'+T.name+"</h1>"+T.description+"</div>";var U=Ext.getCmp("widget_desc");U.update(html)},dataType:"json",contentType:"application/json",error:function(T){}});try{var Q=Ext.getCmp("add_widget_btn");Q.enable()}catch(S){}}}});var O=Ext.create("Ext.window.Window",{title:"Layout Window",closable:true,title:"Add Widget",width:"50%",height:"50%",layout:"border",items:[M,{region:"center",autoScroll:true,id:"widget_desc",html:'<div class="widget_preview">&#60;Preview&#62;</div>',}],buttonAlign:"right",buttons:[{scope:this,text:"Cancel",iconCls:"icon-cancel",handler:function(){O.close()}},{scope:this,text:"Add",iconCls:"icon-ok",disabled:true,id:"add_widget_btn",handler:function(){data=$("#data").data("widget");page=$("#data").data("page_id");M={};M.widget=data.resource_uri;M.page="/api/page/"+page+"/";M.row=1;M.col=1;M.size_y=data.size_y;M.size_x=data.size_x;$.ajax({type:"POST",url:"/api/pagewindow/",data:JSON.stringify(M),dataType:"json",contentType:"application/json",success:function(Q){var R='<div id="'+page+"_"+data.key+'" pagewindow="'+Q.id+'" class="layout_block"></div>';var P=$("#data").data("grid"+page);P.add_widget(R,data.size_x,data.size_y,1,1);E(data,page);y(data.key,page,data.name,data.size_x,data.size_y);O.close()},})}}],}).show()},error:function(K){}})}function g(J){var J=$.parseJSON(J);for(i=0;i<J.length;i++){data={col:J[i].col,row:J[i].row,};$.ajax({type:"PATCH",url:"/api/pagewindow/"+J[i].pagewindow+"/",data:JSON.stringify(data),dataType:"json",contentType:"application/json",error:function(K){},})}}function l(){return Ext.create("Ext.panel.Panel",{region:"center",id:"panel-home",contentEl:"menu",autoDestroy:true,autoScroll:true,defaults:{autoScroll:true},})}function n(){return Ext.create("Ext.tab.Panel",{region:"center",contentEl:"menu",id:"panel-tab",autoDestroy:true,autoScroll:true,layout:"fit"})}var u=new Ext.menu.Menu({items:[{text:"Resize Widget",id:"resize_widget",},{text:"Remove Widget",id:"remove_widget",}],defaults:{listeners:{click:function(K,J){if(K.id=="resize_widget"){}else{if(K.id=="remove_widget"){}}}}},});var B=Ext.create("Ext.menu.Menu",{items:[{text:"Change Theme",menu:{items:[{text:"Default",checked:true,group:"theme",id:"theme_default",checkHandler:A},{text:"BlueBay",checked:false,group:"theme",id:"theme_bluebay",checkHandler:A}]}},{text:"Re-order Panels",id:"enable_drag",},{text:"Lock Panels",id:"disable_drag",hidden:true,},{text:"Log out",id:"log_out",}],defaults:{listeners:{click:function(K,J){page=$("#data").data("page_id");if(K.id=="add_widget"){h()}else{if(K.id=="disable_drag"){$("#data").data("grid"+page).disable();Ext.getCmp("enable_drag").setVisible(true);Ext.getCmp("disable_drag").setVisible(false)}else{if(K.id=="enable_drag"){$("#data").data("grid"+page).enable();Ext.getCmp("disable_drag").setVisible(true);Ext.getCmp("enable_drag").setVisible(false)}else{if(K.id=="log_out"){z()}}}}}}},});function A(K,J){if(K.id==="theme_bluebay"){var L="extjs-themes/bluebay/css/bluebay.css"}else{if(K.id==="theme_default"){var L="extjs/resources/css/ext-all.css"}}Ext.util.CSS.swapStyleSheet("theme",STATIC_URL+L)}function k(J){$.ajax({type:"GET",url:"/api/"+J,success:function(K){$("#data").data(J,K)}})}function b(){$.ajax({type:"GET",url:"/api/menu/",success:function(M){var O=Ext.define("tree",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"text",type:"string",mapping:"name"},{name:"page",type:"string"},]});var L=Ext.create("Ext.data.TreeStore",{model:O,proxy:{data:M,type:"memory",reader:{type:"json",}},});var K=Ext.create("Ext.tree.Panel",{id:"main-menu",store:L,rootVisible:false,preventHeader:true,border:false,autoScroll:true,useArrows:true,height:1000,listeners:{itemexpand:{fn:function(P,Q){nodeId=P.data.id}},itemclick:{fn:function(Q,P,U,R,T,S){if(P.isExpanded()){P.collapse()}else{P.expand()}if(P.raw.page!==null){if(typeof P.raw.page==="object"){P.raw.page=P.raw.page.id}else{var V=P.raw.page.toString();P.raw.page=V.replace(/\D/g,"")}}f(P.raw)}}}});var N=Ext.create("Ext.panel.Panel",{id:"west",region:"west",collapsible:true,title:"Navigation",width:150,items:[K],tools:[{type:"gear",handler:function(S,R,Q,P){B.showBy(R,"tr-br?")}}],});var J=Ext.create("Ext.container.Viewport",{layout:"border",id:"viewport",items:[N,l()]});Ext.EventManager.onWindowResize(J.doLayout,J)}})}Ext.QuickTips.init();var t=new Ext.FormPanel({labelWidth:80,url:"/api/user/login/",frame:true,defaultType:"textfield",monitorValid:true,header:false,style:"padding:10px",headers:{"Content-Type":"application/json"},items:[{fieldLabel:"Username",name:"username",allowBlank:false},{fieldLabel:"Password",name:"password",inputType:"password",allowBlank:false}],buttons:[{text:"Login",formBind:true,handler:function(){t.getForm().submit({method:"POST",headers:{"Content-Type":"application/json","X-HTTP-Method-Override":"POST"},success:function(){e.close();k("fund");k("page");b();page=new Object();page.page=1;H(page)},failure:function(J,K){Ext.Msg.alert("Login failed!","Wrong user name or passsword");t.getForm().reset()}})}}],});var e=new Ext.Window({closeAction:"hide",id:"login-window",title:"Please Login",layout:"fit",width:300,height:150,closable:false,resizable:false,plain:true,border:false,items:[t]});$("#data").data("login-window",e);function z(){$.ajax({type:"GET",url:"/api/user/logout/",success:function(J){var K=$("#data").data("active-panel");Ext.getCmp("west").setVisible(false);Ext.getCmp(K).setVisible(false);$("#data").data("login-window").show()},failure:function(){Ext.Msg.alert("Logout failed!","You could not be logged out.")}})}function D(J){return(/^(GET|HEAD|OPTIONS|TRACE)$/.test(J))}$.ajaxSetup({crossDomain:false,beforeSend:function(K,J){if(!D(J.type)){K.setRequestHeader("X-CSRFToken",$.cookie("csrftoken"))}}});$.ajax({type:"GET",url:"/api/loggedin/",success:function(J){k("page");$('<div id="menu" class="gridster"></div>').appendTo("body");b();$('<div id="page1"></div>').appendTo("#menu");$("#data").data("active-panel","panel-home");page=new Object();page.page=1;H(page)},error:function(){$('<div id="menu" class="gridster"></div>').appendTo("body");$('<div id="page1"></div>').appendTo("#menu");$("#data").data("active-panel","panel-home");e.show()}})});