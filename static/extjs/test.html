<html>
<head>
<title>Client Test</title>
<script type="text/javascript" src="ext-all.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<link rel="stylesheet" type="text/css" href="resources/css/ext-all.css" />
<link rel="stylesheet" type="text/css" href="http://examples.extjs.eu/css/icons.css" />

<script type="text/javascript">

Ext.require([
    'Ext.tree.*',
    'Ext.data.*',
    'Ext.window.MessageBox'
]);


Ext.onReady(function() {


    function switchPanel(panel) {

        var ws = Ext.getCmp('viewport');

        try {
            var active = $('#data').data('active-panel'); 
        } catch(err) {
            console.log("'active-panel' is not set");
        }

        try {
console.log('removing: ' + active);
            ws.remove(active, false);
        } catch(err) {
            console.log("Failed to remove panel");
console.log(err);
        }

        // The 'main' DOM element gets destroyed on remove(), so we have to re-add it
        //$('<div id="main" class="gridster"></div>').appendTo('body');


        var panel_standard = Ext.create('Ext.panel.Panel', {
            region: 'center', 
            id: 'panel-home', 
            contentEl: 'main', 
            autoDestroy: true,
            autoScroll: true,
        });

console.log(panel);
        try {
            ws.add(panelTab());
console.log('panel added');
        } catch(err) {
            console.log("Failed to add panel");
        }
        
        ws.doLayout();  

        // Save the panel so we know which one to destroy next time
        $('#data').data('active-panel', panel.id);



    }


function panelStandard() {
    return Ext.create('Ext.panel.Panel', {
        region: 'center', 
        id: 'panel-home', 
        contentEl: 'asdf', 
        autoDestroy: true,
        autoScroll: true,
    });
}

function panelTab() {
    return  Ext.create('Ext.tab.Panel', {
        region: 'center', 
        id: 'panel-overview', 
        autoDestroy: true,
        autoScroll: true,
        items: [{
                title: 'Foo',
        contentEl: 'asdf', 
            },{
                title: 'Bar',
                html: "2",
            }
        ]
    });
}


    var west_panel = Ext.create('Ext.panel.Panel', {
        region: 'west',
        collapsible: true,
        title: 'Navigation',
        width: 150
    });

    Ext.create('Ext.container.Viewport', {
        layout: 'border',
        id: 'viewport',
        items: [west_panel, panelStandard()]
    });

    

$("#asdf").click(function() {
    switchPanel("Aasdf");
});





});
</script>
</head>
<body><div id="asdf"> click me </div><div id="asdf"> click me again</div><div id="data"></div></body>
</html>
