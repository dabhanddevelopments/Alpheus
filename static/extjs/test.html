<html>
<head>
<title>Client Test</title>
<script type="text/javascript" src="ext-all.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<link rel="stylesheet" type="text/css" href="resources/css/ext-all.css" />
<link rel="stylesheet" type="text/css" href="http://examples.extjs.eu/css/icons.css" />

<script type="text/javascript">

Ext.require([
    'Ext.tree.*',
    'Ext.data.*',
    'Ext.window.MessageBox'
]);


Ext.onReady(function() {


    function switchPanel(panel) {

        var ws = Ext.getCmp('viewport');

        var active = $('#data').data('active-panel'); 

        if(active === undefined) {
            active = 'panel-home'
        }

        try {
console.log('removing: ' + active);
            ws.remove(active);
        } catch(err) {
            console.log("Failed to remove panel");
console.log(err);
        }

        // The 'main' DOM element gets destroyed on remove(), so we have to re-add it
        //$('<div id="main" class="gridster"></div>').appendTo('body');



        try {
            ws.add(panel);
console.log('panel added');
        } catch(err) {
            console.log("Failed to add panel");
            console.log(err);
        }
        
        ws.doLayout();  

        // Save the panel so we know which one to destroy next time
        $('#data').data('active-panel', panel.id);



    }


function panelStandard() {
    return Ext.create('Ext.panel.Panel', {
        region: 'center', 
        id: 'panel-home', 
        contentEl: 'standard', 
        autoDestroy: true,
        autoScroll: true,
    });
}

function panelTab() {
    return  Ext.create('Ext.tab.Panel', {
        region: 'center', 
        id: 'panel-overview', 
        contentEl: 'tab', 
        autoDestroy: true,
        autoScroll: true,
        items: [{
                title: 'Foo',
                //html: '<div id="#asdf2">asdf</div>', 
            },{
                title: 'Bar',
                html: "2",
            }
        ]
    });
}


    var west_panel = Ext.create('Ext.panel.Panel', {
        region: 'west',
        collapsible: true,
        title: 'Navigation',
        width: 150
    });

    Ext.create('Ext.container.Viewport', {
        layout: 'border',
        id: 'viewport',
        items: [west_panel, panelStandard()]
    });

    

$("#standard").click(function() {
    switchPanel(panelStandard());
});
$("#tab").click(function() {
    switchPanel(panelTab());
});



var ws = Ext.getCmp('viewport');
ws.remove('panel-home');
ws.add(panelTab());
ws.remove('panel-overview');
//$('<div id="standard" class="gridster"></div>').appendTo('body');
//ws.add(panelStandard());
//ws.remove('panel-home', true);
//$('<div id="standard" class="gridster"></div>').appendTo('body');
//ws.add(panelTab());
ws.doLayout();  





});
</script>
</head>
<body><div id="standard"> click to go to tab </div><div id="tab"> click to go to standard </div></body>
</html>
